{"ast":null,"code":"var _jsxFileName = \"/Users/chieftain/Dev/bu19/assignments/FSW135/week-6/rlm-token-auth-series-context/client/src/components/issue.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { UserContext } from \".././context/UserProvider.js\";\nimport axios from \"axios\";\nimport Moment from \"react-moment\";\n\nfunction Issue(props) {\n  const {\n    id\n  } = useParams();\n  const {\n    token\n  } = useContext(UserContext);\n  const [issue, setIssue] = useState({\n    content: \"-\",\n    createdOn: \"-\",\n    upvotes: [],\n    downvotes: []\n  });\n\n  function upvote() {\n    let config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios.put(`/issue/upvote/${id}`, config).then(res => {\n      console.log(\"upvoted\");\n    }).catch(err => console.log(err));\n  }\n\n  useEffect(() => {\n    axios.get(`/issue/${id}`).then(res => {\n      setIssue(res.data[0]);\n    }).catch(err => console.log(err));\n  }, []);\n  console.log(issue);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"single-issue-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"si-date-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Moment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, issue.createdOn)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"si-content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, issue.content), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"si-votes-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"upvotes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, `Upvotes: ${issue.upvotes.length}`), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"downvotes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, `Downvotes: ${issue.downvotes.length}`), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: upvote,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, \"Upvote\"), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, \"Downvote\")));\n}\n\nexport default Issue;","map":{"version":3,"sources":["/Users/chieftain/Dev/bu19/assignments/FSW135/week-6/rlm-token-auth-series-context/client/src/components/issue.js"],"names":["React","useContext","useEffect","useState","useParams","UserContext","axios","Moment","Issue","props","id","token","issue","setIssue","content","createdOn","upvotes","downvotes","upvote","config","headers","Authorization","put","then","res","console","log","catch","err","get","data","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;;AAEA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB,QAAM;AAAEC,IAAAA;AAAF,MAASN,SAAS,EAAxB;AACA,QAAM;AAAEO,IAAAA;AAAF,MAAYV,UAAU,CAACI,WAAD,CAA5B;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC;AACjCW,IAAAA,OAAO,EAAE,GADwB;AAEjCC,IAAAA,SAAS,EAAE,GAFsB;AAGjCC,IAAAA,OAAO,EAAE,EAHwB;AAIjCC,IAAAA,SAAS,EAAE;AAJsB,GAAD,CAAlC;;AAOA,WAASC,MAAT,GAAkB;AAChB,QAAIC,MAAM,GAAG;AAAEC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAG,UAASV,KAAM;AAAjC;AAAX,KAAb;AACAL,IAAAA,KAAK,CACFgB,GADH,CACQ,iBAAgBZ,EAAG,EAD3B,EAC8BS,MAD9B,EAEGI,IAFH,CAESC,GAAD,IAAS;AACbC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACD,KAJH,EAKGC,KALH,CAKUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CALlB;AAMD;;AAED1B,EAAAA,SAAS,CAAC,MAAM;AACdI,IAAAA,KAAK,CACFuB,GADH,CACQ,UAASnB,EAAG,EADpB,EAEGa,IAFH,CAESC,GAAD,IAAS;AACbX,MAAAA,QAAQ,CAACW,GAAG,CAACM,IAAJ,CAAS,CAAT,CAAD,CAAR;AACD,KAJH,EAKGH,KALH,CAKUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CALlB;AAMD,GAPQ,EAON,EAPM,CAAT;AAQAH,EAAAA,OAAO,CAACC,GAAR,CAAYd,KAAZ;AACA,sBACE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASA,KAAK,CAACG,SAAf,CADF,CADF,eAIE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqCH,KAAK,CAACE,OAA3C,CAJF,eAKE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2B,YAAWF,KAAK,CAACI,OAAN,CAAce,MAAO,EAA3D,CADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6B,cAAanB,KAAK,CAACK,SAAN,CAAgBc,MAAO,EAAjE,CAFF,eAGE;AAAQ,IAAA,OAAO,EAAEb,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,CALF,CADF;AAcD;;AAED,eAAeV,KAAf","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { UserContext } from \".././context/UserProvider.js\";\nimport axios from \"axios\";\nimport Moment from \"react-moment\";\n\nfunction Issue(props) {\n  const { id } = useParams();\n  const { token } = useContext(UserContext);\n  const [issue, setIssue] = useState({\n    content: \"-\",\n    createdOn: \"-\",\n    upvotes: [],\n    downvotes: [],\n  });\n\n  function upvote() {\n    let config = { headers: { Authorization: `Bearer ${token}` } };\n    axios\n      .put(`/issue/upvote/${id}`, config)\n      .then((res) => {\n        console.log(\"upvoted\");\n      })\n      .catch((err) => console.log(err));\n  }\n\n  useEffect(() => {\n    axios\n      .get(`/issue/${id}`)\n      .then((res) => {\n        setIssue(res.data[0]);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n  console.log(issue);\n  return (\n    <div className=\"single-issue-wrapper\">\n      <div className=\"si-date-wrapper\">\n        <Moment>{issue.createdOn}</Moment>\n      </div>\n      <div className=\"si-content-wrapper\">{issue.content}</div>\n      <div className=\"si-votes-wrapper\">\n        <div className=\"upvotes\">{`Upvotes: ${issue.upvotes.length}`}</div>\n        <div className=\"downvotes\">{`Downvotes: ${issue.downvotes.length}`}</div>\n        <button onClick={upvote}>Upvote</button>\n        <button>Downvote</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Issue;\n"]},"metadata":{},"sourceType":"module"}